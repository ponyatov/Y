%{
#include "sym.hpp"
%}

%defines

%union {
	char c;
	sym *s;
}

%token <s> S MODULE FFILE FEOF
%token <c> EOL

%%
sym :
	| sym MODULE S		{ W(module($2,$3).dump()); }
	| sym FFILE S EOL	{ W((new ffile($2,$3))->dump(),false); }
	| sym FEOF			{ W($2,false); if (curr_file) delete curr_file; }
	| sym EOL			{ W($2); }
	| sym S				{ W($2); }
;
%%

