%{
#include "dura.hpp"
#define TS(X)		{ yylval.s = new string(yytext); return X; }
#define TO(C,X)		{ yylval.o = new biObject(C,yytext); return X; }
%}

%option noyywrap
%option yylineno

%x f
%x x

%%
#[^\n]*				TS(COMMENT)

^\.module[ \t]+		{BEGIN(f);TS(MODULE);}
^\.file[ \t]+		{BEGIN(f);TS(FFILE);}
<f>[\.a-z]+			{BEGIN(INITIAL); TO("sym",SYM);}
^\.eof				TS(FEOF)

\n					TS(EOL)
.					TS(C)
%%

